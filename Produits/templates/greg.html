{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>üì® Bo√Æte de R√©ception</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body {
            background: #f5f7fa;
            font-family: 'Segoe UI', sans-serif;
        }

        .inbox-container {
            max-width: 1100px;
            margin: 50px auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.12);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .inbox-header {
            background: linear-gradient(135deg, #007bff, #6610f2);
            color: white;
            padding: 20px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .inbox-header h2 {
            font-weight: 600;
            margin: 0;
        }

        .btn-new {
            background: white;
            color: #007bff;
            border-radius: 30px;
            font-weight: bold;
            padding: 8px 18px;
            transition: 0.3s;
        }

        .btn-new:hover {
            background: #007bff;
            color: white;
        }

        .table {
            margin-bottom: 0;
        }

        .table thead {
            background: #f1f1f1;
            text-transform: uppercase;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .table tbody tr {
            transition: background 0.2s ease;
        }

        .table tbody tr:hover {
            background: #f9f9f9;
        }

        .status-read {
            color: #28a745;
            font-weight: bold;
        }

        .status-unread {
            color: #007bff;
            font-weight: bold;
        }

        .empty-message {
            text-align: center;
            padding: 50px;
            color: #777;
            font-size: 16px;
        }

        .subject-link {
            color: #007bff;
            font-weight: 600;
            text-decoration: none;
        }

        .subject-link:hover {
            text-decoration: underline;
        }

        .btn-back {
            display: inline-block;
            margin: 20px auto;
            background: #6c757d;
            color: white;
            padding: 8px 18px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 500;
            transition: 0.3s;
        }

        .btn-back:hover {
            background: #5a6268;
            color: white;
        }

        .action-btn {
            border-radius: 25px;
            font-weight: 600;
            padding: 5px 12px;
            transition: 0.3s;
        }

        .action-btn i {
            margin-right: 5px;
        }

        td.text-center a {
            margin-bottom: 3px;
        }
    </style>
</head>
<body>

<div class="inbox-container">
    <div class="inbox-header">
        <h2><i class="fa-solid fa-inbox"></i> Bo√Æte de R√©ception</h2>
        <a href="{% url 'send_message' %}" class="btn btn-new">
            <i class="fa-solid fa-paper-plane"></i> Nouveau message
        </a>
    </div>

    {% if messages %}
    <table class="table table-hover table-striped mb-0">
        <thead>
            <tr>
                <th>Exp√©diteur</th>
                <th>Sujet</th>
                <th>Date</th>
                <th>Statut</th>
                <th class="text-center">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for msg in messages %}
            <tr>
                <td><i class="fa-solid fa-user"></i> {{ msg.sender.username }}</td>
                <td><a href="{% url 'read_message' msg.id %}" class="subject-link">{{ msg.subject }}</a></td>
                <td><i class="fa-regular fa-clock"></i> {{ msg.date_sent|date:"d/m/Y H:i" }}</td>
                <td>
                    {% if msg.is_read %}
                        <span class="status-read"><i class="fa-solid fa-circle-check"></i> Lu</span>
                    {% else %}
                        <span class="status-unread"><i class="fa-solid fa-envelope"></i> Non lu</span>
                    {% endif %}
                </td>
                <td class="text-center">
                    <a href="{% url 'read_message' msg.id %}" 
                       class="btn btn-primary btn-sm action-btn">
                       <i class="fa-solid fa-book-open"></i> Lire
                    </a>
                    <a href="{% url 'delete_message' msg.id %}" 
                       class="btn btn-danger btn-sm action-btn"
                       onclick="return confirm('Voulez-vous vraiment supprimer ce message ?');">
                       <i class="fa-solid fa-trash"></i> Supprimer
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-message">
        <i class="fa-solid fa-envelope-open-text fa-2x"></i><br>
        Aucun message re√ßu pour le moment.
    </div>
    {% endif %}
</div>

<div class="text-center">
    <a href="{% url 'home' %}" class="btn-back"><i class="fa-solid fa-arrow-left"></i> Revenir</a>
</div>

</body>
</html>




